(()=>{"use strict";var e=$(".conversation"),s=$(".messages--sent:last-child"),t=$(".text-bar__field input"),n=$("#form-message"),a=$(".text-bar__thumb"),i=($(window).scrollTop(),{currentText:"test",init:function(){this.send()},send:function(){var e=this;n.submit((function(s){s.preventDefault(),e.createGroup(),e.saveText(),""!=e.currentText&&(e.createMessage(),e.scrollDown())}))},saveText:function(){this.currentText=t.val(),t.val("")},createMessage:function(){s.append($("<div/>").addClass("message").text(this.currentText))},createGroup:function(){$(".messages:last-child").hasClass("messages--received")&&(e.append($("<div/>").addClass("messages messages--sent")),s=$(".messages--sent:last-child"))},scrollDown:function(){e.stop().animate({scrollTop:e[0].scrollHeight},500)}}),o={init:function(){this.send()},send:function(){var e=this;a.on("mousedown",(function(){i.createGroup(),e.create(),e.expand()}))},expand:function(){var t=this,n=s.find(".message:last-child"),o=20,c=setInterval((function(){o>=130?(l(),t.remove()):(o>50?(o+=2,n.removeClass("anim-wiggle"),n.addClass("anim-wiggle-2")):(o+=1,n.addClass()),n.width(o),n.height(o),r?e.scrollTop(e[0].scrollHeight):(i.scrollDown(),r=!0))}),30);function l(){t.stopWiggle(),clearInterval(c)}var r=!1;a.on("mouseup",(function(){l()}))},create:function(){s.append($("<div/>").addClass("message message--thumb thumb anim-wiggle"))},remove:function(){s.find(".message:last-child").animate({width:0,height:0},300),setTimeout((function(){s.find(".message:last-child").remove()}),300)},stopWiggle:function(){s.find(".message").removeClass("anim-wiggle"),s.find(".message").removeClass("anim-wiggle-2")}};Object.create(i).init(),Object.create(o).init()})();