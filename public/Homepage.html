<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>GameByte</title>
	<script src="https://kit.fontawesome.com/1a015cf62c.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="../src/css/base/index.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>

<body class="light">
	<header>
		<nav class="navbarHead">
			<img class="logo" src="../assets/logo.svg" alt="GameByte">
			<div class="search-bar">
				<input type="text" class="search-input" placeholder="What would you like to look for" />
				<button class="search-btn">
					<i class="fas fa-search"></i>
				</button>
				<div class="search-results"></div>
			</div>

			<div class="nav-right">
				<button class="upload-btn" onclick="checkAvatar()">Upload</button>
				<img id="avatar-image" onclick="window.location.href='Avatar.html'" class="hidden">
				<button id="login-btn" onclick="window.location.href='Login.html'">Log in</button>

				<div class="drop-down" class="hidden">
					<i class="fas fa-ellipsis-v fa-lg"></i>
					<div class="menu hidden">
						<ul>
							<li><a href="Avatar.html"><i class="fas fa-font fa-lg"></i> Avatar</a></li>
							<li><a href="#"><i class="fas fa-adjust"></i> Theme</a></li>
							<li><a href="Homepage.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
						</ul>
					</div>
				</div>
			</div>

		</nav>
	</header>

	<main>
		<div class="col-md-8 col-lg-3 mx-auto" id="commentSection" hidden>
		</div>

		<div class="left">
			<div class="btns">
				<a href="Homepage.html" style="background-color: var(--search-hover);"><i
						class="fas fa-home"></i> <span>Home</span></a>
				<a href="Friend.html"><i class="fas fa-user-friends"></i> <span>Friends</span></a>
				<a href="#" onclick="checkAvatar()"><i class="fas fa-video"></i>
					<span>Videos</span></a>
			</div>
			<div class="login">
				<p>Log in to follow</p>
				<button onclick="window.location.href='Login.html'">Log in</button>
			</div>
			<div class="accounts">
			</div>
			<div class="tags">
				<p>Discover</p>
				<div>
					<a href="#"># game</a>
					<a href="#"># game</a>
					<a href="#"># game</a>
					<a href="#"># game</a>
					<a href="#"># gamer</a>
					<a href="#"># game</a>
					<a href="#"># game</a>
					<a href="#"># gamer</a>
					<a href="#"># game</a>
					<a href="#"># gamer</a>
				</div>
			</div>
			<div class="links">
				<div>
					<div class="link">
						<a href="#">About</a>
						<a href="#">Newsroom</a>
						<a href="#">Contact</a>
						<a href="#">GameByte</a>
						<a href="#">ByteDance</a>
					</div>
					<div class="copyright">
						<h6>&copy; 2023 Dai Gurren</h6>
					</div>
				</div>
			</div>
		</div>

		<div class="right" id="post-container">
		</div>

		<div class="chat-container hidden">
			<div class="chat-header">
				<h3>Chat</h3>
				<button class="back-button">Back</button>
			</div>
			<div class="conversation">
				<div class="messages messages--received">
					<div class="message">Check out my clips</div>
					<div class="message">And Send me what you think</div>
				</div>
			</div>
			<div class="text-bar">
				<form class="text-bar__field" id="form-message">
					<input type="text" placeholder="Type" />
				</form>
				<div class="text-bar__thumb">
					<div class="thumb"></div>
				</div>
			</div>
		</div>


		<div class="contacts-sidebar">
		</div>
	</main>
	<script src="https://apis.google.com/js/api.js"></script>
    <script>
        // Set the API key and folder ID variables
        const API_KEY = 'AIzaSyDll_M1xI_AkGotkCbOjUpvPsYrgcY8m8k';
        const FOLDER_ID = '12QzRkopOa5r4BB_aUMCkzcv3eCAsN7jR';

        /**
         * Lists all files in a folder in Google Drive.
         * @param {string} folderId The ID of the folder to list files from.
         * @return {Promise<Array>} A promise that resolves with an array of file URLs.
         */

        async function listFilesInFolder(folderId, dataIndex) {
            // Load the Drive API client library
            await gapi.client.load('drive', 'v3');

            try {
                // List all files in the specified folder
                const response = await gapi.client.drive.files.list({
                    q: `'${folderId}' in parents`,
                    fields: 'nextPageToken, files(webContentLink)',
                });

                // Extract the file URLs from the response and return them as an array
                const fileUrls = response.result.files.map((file) => file.webContentLink);

                // Store the file URLs in the videoSources array of the specified object in data
                data[dataIndex].videoSources = fileUrls.map((url, index) => {
                    return {
                        index: (index + 1).toString(),
                        src: url
                    };
                });

                return fileUrls;
            } catch (error) {
                console.error(error);
                throw error;
            }
        }


        // Initialize the Google API client with your API key
        gapi.load('client', () => {
            gapi.client.init({
                apiKey: API_KEY,
                discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],
            })
                .then(() => {
                    // Check if the file URLs are already stored in local storage
                    const fileUrls = JSON.parse(localStorage.getItem('fileUrls'));

                    if (fileUrls) {
                        // Use the file URLs from local storage
                        console.log(fileUrls);
                    } else {
                        // Call the listFilesInFolder function with the specified folder ID
                        listFilesInFolder(FOLDER_ID)
                            .then((fileUrls) => console.log(fileUrls))
                            .catch((error) => console.error(error));
                    }
                });
        });
    </script>
	<script src="users.js"></script>
	<script type="text/javascript" src="../src/js/functions/sandbox.js"></script>
	<script type="text/javascript" src="../src/js/functions/chat.js"></script>
	<script type="text/javascript" src="../src/js/functions/menu.js"></script>
	<script type="text/javascript" src="../src/js/functions/post.js"></script>
	<script type="text/javascript" src="../src/js/functions/search.js"></script>
	<script src="../src/js/functions/avatar.js"></script>
	<script src="../src/js/functions/left.js"></script>
	<script src="../src/js/functions/userlogin.js"></script>
	<script src="../src/js/functions/comments.js"></script>
</body>

</html>